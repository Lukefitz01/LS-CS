<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="button.js"></script>
    <title>Main Page</title>
</head>

<body class="">
    <header class="header">
        <div class="">
            <div class="">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="whatif.html">What if</a></li>
                    <li><a href="graph.html">Past Results</a></li>
                    <li><a href="a.html">Placeholder</a></li>
                </ul>
            </div>
        </div>
    </header>
    <div class="mainbody">
        <div class="toptext">
            <h1>What if?</h1>
        </div>
        <div class="top">
            <div class="image">
                <img src="Images/asian-male-construction-worker-thinking-260nw-2230323527-1398327032.jpg"
                    alt="Construction Worker Thinking">
            </div>
            <div class="text1">
                <p>Welcome to the "What if" page. This page will answer the questions "What if the user was to take up a
                    sport?" and "What if the user was to take a break from their manual labour?" using the reaction time
                    data, Temperature data combined with the data inputted from the form below.
                </p>
                <p>
                    To start , fill out the form below, then press the "Submit" button then the "Show button" to get
                    your results
                </p>
            </div>
        </div>
        <div class="form">
            <div class="">
                <div class="margin1">
                    <label>Age</label><input class="margin2" id="age" type="number">
                </div>
                <div class="margin1">
                    <label>Gender</label><select class="margin2" id="gen">
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>

                    </select>
                </div>
                <div class="margin1">
                    <label>Time since last break (mins)</label><input class="margin2" id="wtime" type="number">
                </div>
            </div>


            <button id="submit">Submit</button>
        </div>
            <div class="microbittext">
                <p>Press the button to find the answers to the "what if" questions </p>
            </div>
            <div class="form">
                <button id="Button2">Button</button>
            </div>
            <div class="full">
            <div class="left">
                <p>"What if the user was to take up a sport?</p>
                <div class="text333"><p>Your reaction time is:</p>
                <p id=""></div>
                <div class="text333"><p>This is </p>
                <p id="">
                <p>Precent </p>
                <p id="">
                <p>Normal for your age and gender</p></div>

                <div class="text333">Based on this, the sports you should consider taking up are:</div>
                <p id="">
            </div>
            <div class="right">
                <p>What if the user was to take a break from their manual labour?</p>
                <p>Based on the inputted information, and the temperature in your area, you</p>
                <p id="">
                <p>take a break for 10 mins</p>
            </div>
        </div>
        <div class="bottomtext">
            <p>Want to visit the homepage? <a href="index.html">Home</a></li> page.</p>
            <p>Want to see all your past results? check out the
                <a href="graph.html">Past Results</a> page
            </p>
        </div>
    
    <script type="module">
        // time working box  + data add
        // IF avg Rtime > num (dependinh), give list of sprts (30% of normal) 
        // If time working > num and temp > num , tell user to/not to take break
        // display this to the user

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";



        const firebaseConfig = {
            apiKey: "AIzaSyADFbm7eOAYc9ikVduSPEF_i_sKDDpfRY8",
            authDomain: "fire10db-5cdc9.firebaseapp.com",
            databaseURL: "https://fire10db-5cdc9-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fire10db-5cdc9",
            storageBucket: "fire10db-5cdc9.appspot.com",
            messagingSenderId: "754388872821",
            appId: "1:754388872821:web:b3ff18d3df16964eac123c"
        };


        const app = initializeApp(firebaseConfig);

        import { getDatabase, ref, set, get, child, update, remove }
            from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"

        const db = getDatabase();



        let Age = document.getElementById('age');
        let gen = document.getElementById('gen');
        let wtime = document.getElementById('wtime');
        let time = 0
        let form = document.getElementById('submit');


        function validateform() {

            if (document.getElementById("age").value == "") {
                alert("Please provide age!");
                return false;
            }

            else {
                console.log("Form Success")
            }


            time = (new Date()).getTime() / 1000;
            time = Math.round(time)
            set(ref(db, 'UserLog/' + time), {
                age: Number(Age.value),
                gender: gen.value,
                working: wtime.value
            }).then(() => {
                alert('Form Submitted');
            }).catch(() => {
                alert('Unsuccessful')
                console.log(error)
            })


        }
        form.addEventListener('click', validateform)

        let displaybutton =  document.getElementById('Button2');
        displaybutton.addEventListener('click', displaydata);

        let M15 = 0
        let M16 = 0
        let M21 = 0
        let M26 = 0
        let M31 = 0
        let M36 = 0
        let M41 = 0
        let M46 = 0
        let M51 = 0
        let M56 = 0
        let M61 = 0
        let F15 = 0
        let F16 = 0
        let F21 = 0
        let F26 = 0
        let F31 = 0
        let F36 = 0
        let F41 = 0
        let F46 = 0
        let F51 = 0
        let F56 = 0
        let F61 = 0

        let var1 = 0

        let usernum = 0
        let age1 = 0
        let gender1 = ""
        let working1 = 0

        let reactionnum = 0
        let temp1 = 0
        let Rtime1  = 0 
        function displaydata(){
            const dbRef = ref(db);
            //console.log(dbRef)

            get(child(dbRef,'MRTimeSet/')).then((snapshot) => {
                if (snapshot.exists()) {
                   // M15 = snapshot.val()
                    //console.log(M15)    
                    
                    snapshot.forEach((childSnapshot)=> {
                        const childKey = childSnapshot.key;
                        const childData = childSnapshot.val().RTime;
                       // console.log(childData);

                        if (var1 == 0) {
                            M15 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 1) {
                            M16 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 2) {
                            M21 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 3) {
                            M26 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 4) {
                            M31 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 5) {
                            M36 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 6) {
                            M41 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 7) {
                            M46= childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 8) {
                            M51 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 9) {
                            M56 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 10) {
                            M61 = childData;
                            var1 = 0

                            // console.log(M36,M61)
                        }
                    })
                   

                }
                else {
                    alert("data no exist 1 ")
                }
            })

            get(child(dbRef,'FRTimeSet/')).then((snapshot) => {
                if (snapshot.exists()) {
                   // M15 = snapshot.val()
                    //console.log(M15)    
                    
                    snapshot.forEach((childSnapshot)=> {
                        const childKey = childSnapshot.key;
                        const childData = childSnapshot.val().RTime;
                        //console.log(childData);

                        if (var1 == 0) {
                            F15 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 1) {
                            F16 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 2) {
                            F21 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 3) {
                            F26 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 4) {
                            F31 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 5) {
                            F36 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 6) {
                            F41 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 7) {
                            F46= childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 8) {
                            F51 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 9) {
                            F56 = childData;
                            var1 = var1 + 1
                        }
                        else if (var1 == 10) {
                            F61 = childData;
                            var1 = var1 + 1

                            //console.log(F36,F61)
                        }
                    })
                   

                }
                else {
                    alert("data no exist")
                }
            })

            get(child(dbRef,'ProjReactionLog/')).then((snapshot) => {
                if (snapshot.exists()) {    
                    
                    snapshot.forEach((childSnapshot)=> {
                        const childKey = childSnapshot.key;
                        const childDataTime= childSnapshot.val().ReactionTime;
                        const childDataTemp = childSnapshot.val().Temp;
                        
                        console.log(childKey,childDataTime,childDataTemp );

                       reactionnum = childKey;
                       temp1 = childDataTemp ;
                       Rtime1 =  childDataTime;
                       
                
                    })
                   console.log(reactionnum ,temp1 , Rtime1);

                }
                else {
                    alert("data no exist 3 ")
                }
            })


             
            get(child(dbRef,'UserLog/')).then((snapshot) => {
                if (snapshot.exists()) {
                   // M15 = snapshot.val()
                    //console.log(M15)    
                    
                    snapshot.forEach((childSnapshot)=> {
                        const childKey = childSnapshot.key;
                        const childDataAge = childSnapshot.val().age;
                        const childDataGen = childSnapshot.val().gender;
                        const childDataWork = childSnapshot.val().working;
                        console.log(childKey,childDataAge,childDataGen , childDataWork);

                       usernum = childKey;
                       age1 = childDataAge;
                       gender1 = childDataGen;
                       working1 = childDataWork;
                
                    })
                   console.log(usernum ,age1 ,gender1 , working1);

                }
                else {
                    alert("data no exist 3 ")
                }
            })
            if (age < 16){

            }
            else if (age > 15 && age < 21){

            }
            else if (age > 20  && age < 26){
            }
            else if (age > 25 && age < 31){
            }
            else if (age > 30 && age < 36){
            }
            else if (age > 35 && age < 41){
            }
            else if (age > 40 && age < 46){
            }
            else if (age > 45 && age < 51){
            }
            else if (age > 50 && age < 56){
            }
            else if (age > 55 && age < 61){
            }
            else if (age > 61){
            }
            
            

            



                    }
    </script>
</body>

</html>